# Dockerfile for GoReleaser
# GoReleaser provides pre-built binaries, so we don't need to build from source
FROM alpine:latest

RUN apk add --no-cache ca-certificates tzdata

WORKDIR /app

# GoReleaser v2 uses TARGETPLATFORM for multi-arch builds
ARG TARGETPLATFORM
COPY ${TARGETPLATFORM}/walship /app/walship

# Create a non-root user
RUN addgroup -S walship && adduser -S walship -G walship
USER walship

ENTRYPOINT ["/app/walship"]
